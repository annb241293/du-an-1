if (self.CavalryLogger) { CavalryLogger.start_js(["CQfjL"]); }

__d("BirthdayComposers",["Arbiter","ReactComposerEvents"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[],h=[];a={_focusOnNextBirthdayComposer:function(a){h[a]=null;a=a;while(a<h.length){a+=1;if(h[a]!==null&&h[a]!==void 0){b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+h[a]);break}}},addUsers:function(a){g=a,h=new Array(g.length)},addComposer:function(a,c){var d=this,e=g.indexOf(c);if(e<0)return;h[e]=a;b("Arbiter").subscribe(b("ReactComposerEvents").POST_STARTED+a,function(){d._focusOnNextBirthdayComposer(e)})}};e.exports=a}),null);
__d("XBirthdayRemindersCounterController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/birthday/reminder/counter/",{event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("BirthdayRemindersCounter",["AsyncSignal","XBirthdayRemindersCounterController"],(function(a,b,c,d,e,f){a={logEvent:function(a){a=b("XBirthdayRemindersCounterController").getURIBuilder().setEnum("event",a).getURI();new(b("AsyncSignal"))(a).send()}};e.exports=a}),null);
__d("BirthdayRemindersCounterEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_MODAL:"open_modal",PHOTO_FLOW_WITHOUT_PERSONALIZED:"photo_flow_without_personalized",PHOTO_FLOW_WITH_PERSONALIZED:"photo_flow_with_personalized",ADD_PERSONALIZED_PHOTO:"add_personalized_photo",CLICK_ALBUM:"click_album",ADD_ALBUM_PHOTO:"add_album_photo",SELFIE_FLOW:"selfie_flow",ADD_SELFIE:"add_selfie",ADD_UPLOADED:"add_uploaded",POST_WITH_PHOTO:"post_with_photo",POST_WITHOUT_PHOTO:"post_without_photo",POST_NON_SCHEDULED:"post_non_scheduled",POST_SCHEDULED:"post_scheduled",CANCEL_SCHEDULED_MODAL:"cancel_scheduled_modal",CANCEL_SCHEDULED_TIMELINE:"cancel_scheduled_timeline"})}),null);
__d("XBirthdayRemindersCameraPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/birthday/reminder/camera/preview/",{photo_fbid:{type:"Int",required:!0},target_id:{type:"Int",required:!0},uuid:{type:"String",required:!0}})}),null);
__d("BirthdayModal",["csx","cx","AsyncRequest","BirthdayRemindersCounter","BirthdayRemindersCounterEvent","BirthdaysReminder","Button","ComposerNUXType","ComposerXNUX","CSS","DataStore","DOM","Event","FileInputUploader","Focus","Layer","Parent","XBirthdayRemindersCameraPreviewController","focusWithinLayer","getActiveElement","goURI","setImmediate"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null,j={},k={},l,m={},n={},o={init:function(a,c,d,e){Object.prototype.hasOwnProperty.call(k,e)||(k[e]=d),m[e]=a,n[e]=c,b("Event").listen(a,"click",function(a){b("BirthdayRemindersCounter").logEvent(b("BirthdayRemindersCounterEvent").OPEN_MODAL),d.show()}.bind(this))},initAsyncDialog:function(a,c){k[c]=a,b("setImmediate")(function(){var c=b("getActiveElement")();c&&c.blur();b("focusWithinLayer")(a.getRoot())})},addComposers:function(a,c,d,e){__p&&__p();if(d===b("BirthdaysReminder").LayoutTypes.MULTIPLE){var f=d.concat(c).concat(e);Object.prototype.hasOwnProperty.call(j,f)||(j[f]=a);this._addComposer(b("DOM").find(a,"._5j0b"),c,d,e)}else{(!c||c!==i)&&(j={});i=c;for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&this._addComposer(b("DOM").find(a[g],"._5j0b"),g,d,e)}},_showInput:function(a){var c=b("DOM").scry(a,"._u48").pop();if(!c)return;a=b("DOM").find(a,"._4ovy");var d=b("DOM").find(a,".inlineReplyTextArea");b("CSS").hide(c);b("CSS").show(a);b("Focus").set(d)},_addComposer:function(a,c,d,e){__p&&__p();d=d.concat(c).concat(e);j[d]=a;var f=b("DOM").scry(a,"._4ovw").pop();if(!f)return;var g=this;["click","focus"].forEach(function(c){b("Event").listen(f,c,function(c){c=c.getTarget();if(b("Parent").bySelector(c,"._260q"))return;g._showInput(a)})});e=b("DOM").find(a,"._4ow2");this._addRemoveButton(e,c,d)},addUpcomingBirthdays:function(a,c){b("Event").listen(c.firstChild,"click",function(d){b("CSS").show(a),b("CSS").hide(c)})},attachPhoto:function(a,c,d,e,f){__p&&__p();e=e.concat(d).concat(f);d=j[e];if(!d)return;f=b("DOM").find(d,"._4ovz");b("CSS").removeClass(f,"._4ow0");e=b("DOM").find(d,"._4ow1");e.appendChild(c);b("DOM").appendContent(f,a);e=b("DOM").find(d,"._4ow2");b("CSS").show(e);this._showInput(d);c=b("DOM").find(d,"._30e4");b("Button").setEnabled(c,!0)},initUploader:function(a,b,c,d,e,f){b=a.getInput();a.subscribe("change",this._uploadPhoto.bind(this,b,d,c,e,f))},_uploadPhoto:function(a,c,d,e,f){__p&&__p();e=e.concat(d).concat(f);d=j[e];if(!d)return;b("BirthdayRemindersCounter").logEvent(b("BirthdayRemindersCounterEvent").ADD_UPLOADED);this._showInput(d);f=b("DOM").find(d,"._4ow3");e=b("DOM").find(d,"._4ow4");b("CSS").show(f);b("CSS").hide(e);f=new(b("FileInputUploader"))(a);f.setURI(c.uploadURI).setData(c.uploadData).setAllowCrossOrigin(!0).setUploadInParallel(!0).setFiles({files:a.files}).send();e=b("DOM").find(d,"._30e4");b("Button").setEnabled(e,!1);f=b("Layer").getTopmostLayer();f&&f.hide()},getCameraPreview:function(a,c,d){__p&&__p();var e=b("BirthdaysReminder").LayoutTypes.SINGLETON.concat(c).concat(d);e=j[e];if(!e)return;b("BirthdayRemindersCounter").logEvent(b("BirthdayRemindersCounterEvent").ADD_SELFIE);this._showInput(e);var f=b("DOM").find(e,"._4ow3"),g=b("DOM").find(e,"._4ow4");b("CSS").show(f);b("CSS").hide(g);f=b("XBirthdayRemindersCameraPreviewController").getURIBuilder().setInt("target_id",c).setInt("photo_fbid",a).setString("uuid",d).setString("singleton",b("BirthdaysReminder").LayoutTypes.SINGLETON).getURI();new(b("AsyncRequest"))(f).send();g=b("DOM").find(e,"._30e4");b("Button").setEnabled(g,!1)},showPhotoPicker:function(a,c){a.subscribeOnce(["show"],function(){b("CSS").addClass(k[c].getContentRoot(),"_30e3")}.bind(this)),a.subscribeOnce(["hide"],function(){k[c].show(),b("CSS").removeClass(k[c].getContentRoot(),"_30e3")}.bind(this))},showPreviewPhoto:function(a,c,d,e,f){__p&&__p();e=e.concat(d).concat(f);d=j[e];if(!d)return;f=b("DOM").find(d,"._4ow3");e=b("DOM").find(d,"._4ovz");var g=b("DOM").find(d,"._4ow4");b("CSS").show(f);b("CSS").hide(g);b("CSS").removeClass(e,"._4ow0");f=b("DOM").find(d,"._4ow1");f.appendChild(c);b("DOM").appendContent(e,a);g=b("DOM").find(d,"._4ow2");b("CSS").show(g);this._showInput(d);f=b("Layer").getTopmostLayer();f&&f.hide()},addPhotoItem:function(a,c,d,e,f,g,h){__p&&__p();var i=this;g=g.concat(e).concat(h);var k=j[g];if(!k)return;b("Event").listen(a,"click",function(){__p&&__p();b("BirthdayRemindersCounter").logEvent(f);var a=b("DOM").find(k,"._4ow3"),e=b("DOM").find(k,"._4ovz"),g=b("DOM").find(k,"._4ow4");b("CSS").show(a);b("CSS").hide(g);b("CSS").removeClass(e,"._4ow0");a=b("DOM").find(k,"._4ow1");a.appendChild(d);b("DOM").appendContent(e,c);g=b("DOM").find(k,"._4ow2");b("CSS").show(g);i._showInput(k);a=b("Layer").getTopmostLayer();a&&a.hide()})},_addRemoveButton:function(a,c,d){__p&&__p();var e=j[d];if(!e)return;b("Event").listen(a,"click",function(c){__p&&__p();c.kill();b("CSS").hide(a);c=b("DOM").find(e,"._4ow3");var d=b("DOM").find(e,"._4ovz"),f=b("DOM").find(e,"._4ow4");b("CSS").hide(c);b("CSS").show(f);b("CSS").addClass(d,"._4ow0");c=b("DOM").scry(e,"._4ltt").concat(b("DOM").scry(e,"._4ow5"));c.forEach(function(a){b("DOM").remove(a)})}.bind(this))},_resetComposer:function(a){var c=b("DOM").find(a,"._4ow2");c.click();c=b("DOM").find(a,".uiMentionsInput");b("DataStore").get(c,"MentionsInput").reset()},closeDialog:function(a,b,c){b=b.concat(a).concat(c);k[b].hide()},finishPosting:function(a,c,d,e,f){if(d)return b("goURI")(window.location.href,!0);a=e.concat(c).concat(f);d=j[a];if(!d)return;this._resetComposer(d);b("CSS").addClass(d,"_4dgh");e===b("BirthdaysReminder").LayoutTypes.MULTIPLE&&(b("CSS").addClass(m[a],"_1exi"),b("CSS").addClass(n[a],"_1exj"))},cancelScheduled:function(a,c,d){if(c!=="modal")return b("goURI")(window.location.href,!0);c=b("BirthdaysReminder").LayoutTypes.SINGLETON.concat(a).concat(d);a=j[c];if(!a)return;b("CSS").removeClass(a,"_4dgh")},setPhotoAlbumView:function(a){l=a},setPhotoView:function(a){__p&&__p();if(!l)return;var c=b("DOM").find(l,"._5r32");if(c)b("CSS").hide(c);else return;var d=b("DOM").find(l,"._375u");d.appendChild(a);d=b("DOM").find(a,"._375v");b("Event").listen(d,"click",function(){b("CSS").show(c);var a=b("DOM").find(l,"._375w");b("DOM").remove(a)}.bind(this))},attachFlyout:function(a){__p&&__p();var c=a.getContext(),d=b("DOM").find(a.getContentRoot(),"._21xo"),e=b("DOM").scry(a.getContentRoot(),"._15p7").pop(),f=function(){b("CSS").conditionClass(c,"_21xn",a.isShown())};f();a.subscribe(["show","hide"],f);b("Event").listen(c,"click",function(b){a.conditionShow(!a.isShown()),b.kill()});b("Event").listen(d,"click",function(){a.hide()});e&&b("Event").listen(e,"click",function(){a.hide()})},initMegaphone:function(a,c){b("Event").listen(c,"click",function(){b("DOM").remove(a),b("ComposerXNUX").sendMarkSeenRequest(b("ComposerNUXType").UPCOMING_BIRTHDAYS_NUX)})},registerBirthdayPostHandler:function(a,c,d){__p&&__p();b("Event").listen(a,"submit",function(e,f){__p&&__p();e=b("Parent").byClass(a,c);if(e)for(f=e.nextSibling;f;f=f.nextSibling){e=b("DOM").scry(f,d);if(e.length>0){o._showInput(f);break}}return!0})}};e.exports=o}),null);